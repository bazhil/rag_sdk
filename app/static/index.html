<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAG - –ß–∞—Ç —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏</title>
    <link rel="stylesheet" href="/static/style.css?v=2">
</head>
<body>
    <div class="container">
        <header>
            <h1>RAG - –ß–∞—Ç —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏</h1>
        </header>
        
        <div class="main-layout">
            <aside class="sidebar">
                <div class="sidebar-header">
                    <h2>–î–æ–∫—É–º–µ–Ω—Ç—ã</h2>
                </div>
                
                <div class="upload-section">
                    <input type="file" id="fileInput" accept="*/*" style="display: none;">
                    <button id="uploadBtn" class="btn btn-primary">
                        <span>üìÅ</span> –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
                    </button>
                </div>
                
                <div class="search-mode-toggle">
                    <h3>–†–µ–∂–∏–º –ø–æ–∏—Å–∫–∞</h3>
                    <div class="toggle-buttons">
                        <button id="ragModeBtn" class="mode-btn active" data-mode="rag">
                            üìö RAG (–î–æ–∫—É–º–µ–Ω—Ç—ã)
                        </button>
                        <button id="webModeBtn" class="mode-btn" data-mode="web">
                            üåê –í–µ–±-–ø–æ–∏—Å–∫
                        </button>
                    </div>
                </div>
                
                <div id="ragOptions" class="rag-options">
                    <div class="document-filter">
                        <label>
                            <input type="radio" name="docFilter" value="all" checked>
                            –í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
                        </label>
                        <label>
                            <input type="radio" name="docFilter" value="selected">
                            –í—ã–±—Ä–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
                        </label>
                    </div>
                </div>
                
                <div id="documentList" class="document-list">
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤...</div>
                </div>
            </aside>
            
            <main class="chat-section">
                <div id="chatMessages" class="chat-messages">
                    <div class="welcome-message">
                        <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ RAG</h2>
                        <p>–ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ –Ω–∞—á–Ω–∏—Ç–µ –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã, –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–µ–±-–ø–æ–∏—Å–∫</p>
                        <h3>üìö –†–µ–∂–∏–º RAG (–î–æ–∫—É–º–µ–Ω—Ç—ã):</h3>
                        <ul>
                            <li>–ó–∞–≥—Ä—É–∂–∞–π—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã –ª—é–±–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ (PDF, DOCX, TXT, MD –∏ –¥—Ä.)</li>
                            <li>–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç –¥–ª—è —Ü–µ–ª–µ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</li>
                            <li>–ó–∞–¥–∞–≤–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</li>
                            <li><strong>–í–≤–µ–¥–∏—Ç–µ "summary"</strong> –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –µ–≥–æ –∫—Ä–∞—Ç–∫–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è</li>
                            <li><strong>–í–≤–µ–¥–∏—Ç–µ "referat"</strong> –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ—Ñ–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ —Å PDF</li>
                        </ul>
                        <h3>üåê –†–µ–∂–∏–º –í–µ–±-–ø–æ–∏—Å–∫–∞:</h3>
                        <ul>
                            <li>–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ —Ä–µ–∂–∏–º "–í–µ–±-–ø–æ–∏—Å–∫" –≤ –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏</li>
                            <li>–ó–∞–¥–∞–≤–∞–π—Ç–µ –ª—é–±—ã–µ –≤–æ–ø—Ä–æ—Å—ã - —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–π–¥–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ</li>
                            <li>–ü–æ–ª—É—á–∞–π—Ç–µ —Å—É–º–º–∞—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –∏ —Å—Å—ã–ª–∫–∞–º–∏</li>
                        </ul>
                    </div>
                </div>
                
                <div class="chat-input-container">
                    <div id="selectedDocInfo" class="selected-doc-info" style="display: none;"></div>
                    <div class="chat-input-wrapper">
                        <textarea 
                            id="chatInput" 
                            class="chat-input" 
                            placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å..."
                            rows="1"
                        ></textarea>
                        <button id="sendBtn" class="btn btn-send">
                            <span>üì§</span> –û—Ç–ø—Ä–∞–≤–∏—Ç—å
                        </button>
                    </div>
                </div>
            </main>
        </div>
    </div>
    
    <!-- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ Markdown -->
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.0/marked.min.js"></script>
    <script>
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ marked.js
        if (typeof marked !== 'undefined') {
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–Ω–¥–µ—Ä–µ—Ä–∞ –¥–ª—è —Å—Å—ã–ª–æ–∫
            const renderer = new marked.Renderer();
            
            // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å—Å—ã–ª–æ–∫ - –¥–µ–ª–∞–µ–º –∏—Ö –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º–∏
            renderer.link = function(href, title, text) {
                const titleAttr = title ? ` title="${title}"` : '';
                // –ï—Å–ª–∏ —Å—Å—ã–ª–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å http –∏–ª–∏ /, –æ—Ç–∫—Ä—ã–≤–∞–µ–º –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
                const target = (href.startsWith('http') || href.startsWith('/')) ? ' target="_blank" rel="noopener noreferrer"' : '';
                return `<a href="${href}"${titleAttr}${target} class="markdown-link">${text}</a>`;
            };
            
            marked.setOptions({
                breaks: true,
                gfm: true,
                renderer: renderer
            });
            console.log('Marked.js loaded successfully with custom renderer');
        } else {
            console.error('Marked.js failed to load');
        }
    </script>
    <script src="/static/script.js?v=2"></script>
</body>
</html>

