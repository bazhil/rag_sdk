# RAG - Retrieval-Augmented Generation

–ù–µ–±–æ–ª—å—à–æ–π –ø—Ä–æ–µ–∫—Ç –Ω–∞ Python –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ —Å —Å–∏—Å—Ç–µ–º–æ–π RAG (Retrieval-Augmented Generation) —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º PostgreSQL + pgvector –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π SDK** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å RAG —Å–∏—Å—Ç–µ–º–∞–º–∏
- **–í–µ–∫—Ç–æ—Ä–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** –Ω–∞ –±–∞–∑–µ PostgreSQL —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º pgvector
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ñ–æ—Ä–º–∞—Ç–æ–≤** —Ñ–∞–π–ª–æ–≤: PDF, DOCX, XLSX, TXT, MD, HTML, CSV, JSON –∏ –¥—Ä.
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ —á–∞—Ç–∞
- **–°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫—Ä–∞—Ç–∫–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **üåç –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫—Ä–æ—Å—Å-—è–∑—ã–∫–æ–≤–æ–π –ø–æ–∏—Å–∫** - —Ä–∞–±–æ—Ç–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –Ω–∞ –ª—é–±—ã—Ö —è–∑—ã–∫–∞—Ö –±–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ LLM** —á–µ—Ä–µ–∑ llm_manager (OpenAI, Ollama, DeepSeek, Yandex GPT, GigaChat)
- **Docker Compose** –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ [`docs/`](docs/):

- [**–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç**](docs/QUICKSTART.md) - –∑–∞–ø—É—Å–∫ –∑–∞ 5 –º–∏–Ω—É—Ç
- [**–£—Å—Ç–∞–Ω–æ–≤–∫–∞**](docs/INSTALL.md) - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
- [**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**](docs/USAGE.md) - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é API –∏ SDK
- [**–°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**](docs/SUMMARIZATION.md) - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∫—Ä–∞—Ç–∫–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è
- [**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫—Ä–æ—Å—Å-—è–∑—ã–∫–æ–≤–æ–π –ø–æ–∏—Å–∫**](docs/AUTO_MULTILINGUAL.md) - —Ä–∞–±–æ—Ç–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö
- [**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞**](docs/CONTEXT_TUNING.md) - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤
- [**Docker Compose —Å Ollama**](docs/DOCKER_OLLAMA.md) - –∑–∞–ø—É—Å–∫ —Å Ollama –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ
- [**–†–∞–±–æ—Ç–∞ —Å Submodules**](docs/SUBMODULES.md) - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
- [**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**](docs/LOGGING.md) - —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ç–ª–∞–¥–∫–∞
- [**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**](docs/ARCHITECTURE.md) - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏
- [**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞**](docs/PROJECT_STRUCTURE.md) - –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
- [**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è**](docs/ENV_SETUP.md) - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ GigaChat**](docs/GIGACHAT_SETUP.md) - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GigaChat
- [**Windows**](docs/WINDOWS.md) - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è Windows
- [**–£–ª—É—á—à–µ–Ω–∏—è**](docs/IMPROVEMENTS.md) - —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø–æ–≤—ã—à–µ–Ω–∏—é –∫–∞—á–µ—Å—Ç–≤–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
RAG/
‚îú‚îÄ‚îÄ RAG/                        # –û—Å–Ω–æ–≤–Ω–æ–π SDK (–º–æ–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö)
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ config.py               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ vector_store.py         # –†–∞–±–æ—Ç–∞ —Å PostgreSQL + pgvector
‚îÇ   ‚îú‚îÄ‚îÄ embeddings.py           # –ú–æ–¥–µ–ª–∏ embeddings
‚îÇ   ‚îú‚îÄ‚îÄ document_processor.py   # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ —Ñ–∞–π–ª–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ rag_manager.py          # –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å RAG
‚îú‚îÄ‚îÄ app/                        # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ main.py                 # API endpoints
‚îÇ   ‚îú‚îÄ‚îÄ models.py               # Pydantic –º–æ–¥–µ–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ static/                 # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ       ‚îú‚îÄ‚îÄ index.html
‚îÇ       ‚îú‚îÄ‚îÄ style.css
‚îÇ       ‚îî‚îÄ‚îÄ script.js
‚îú‚îÄ‚îÄ llm_manager/                # Git submodule –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å LLM
‚îú‚îÄ‚îÄ scripts/                    # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ docker-build.sh         # –°–±–æ—Ä–∫–∞ Docker —Å –∞–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π submodules (Linux/Mac)
‚îÇ   ‚îú‚îÄ‚îÄ docker-build.ps1        # –°–±–æ—Ä–∫–∞ Docker —Å –∞–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π submodules (Windows)
‚îÇ   ‚îú‚îÄ‚îÄ start.ps1               # –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Windows)
‚îÇ   ‚îú‚îÄ‚îÄ stop.ps1                # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (Windows)
‚îÇ   ‚îú‚îÄ‚îÄ setup_env.sh            # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Linux/Mac)
‚îÇ   ‚îî‚îÄ‚îÄ init.sql                # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ uploads/                    # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ docker-compose.yml          # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Dockerfile                  # Docker –æ–±—Ä–∞–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ Makefile                    # –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–º
‚îú‚îÄ‚îÄ requirements.txt            # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ .env                        # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** PostgreSQL –≤ Docker –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É **6432** (–Ω–µ 5432), —á—Ç–æ–±—ã –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å –ª–æ–∫–∞–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º PostgreSQL.

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/bazhil/RAG.git
cd RAG
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** Git submodules –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ —Å–±–æ—Ä–∫–∏.

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞:

```env
PROVIDER=ollama
OLLAMA_HOST=http://host.docker.internal:11434
OLLAMA_MODEL=llama3
```

### 3. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

#### Linux/Mac:
```bash
./scripts/docker-build.sh
```

#### Windows PowerShell:
```powershell
.\scripts\docker-build.ps1
```

#### –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é:
```bash
docker compose up --build
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç git submodules –ø–µ—Ä–µ–¥ —Å–±–æ—Ä–∫–æ–π.

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://localhost:8000

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ http://localhost:8000
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª"
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –ø–æ–∏—Å–∫–∞:
   - **–í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã** - –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–º –¥–æ–∫—É–º–µ–Ω—Ç–∞–º
   - **–í—ã–±—Ä–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç** - –ø–æ–∏—Å–∫ —Ç–æ–ª—å–∫–æ –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ
4. –ó–∞–¥–∞–≤–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å—ã –≤ —á–∞—Ç–µ –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
5. **–°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞**: –≤—ã–±–µ—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ –∏ –≤–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É `summary` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—Ä–∞—Ç–∫–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SDK –≤ –∫–æ–¥–µ

### –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä

```python
from RAG import RAGManager

async def main():
    rag = RAGManager()
    await rag.initialize()
    
    document_id = await rag.add_document(
        file_path="path/to/document.pdf",
        filename="document.pdf"
    )
    
    result = await rag.generate_answer(
        query="–ö–∞–∫–∞—è –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–µ–º–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞?",
        document_id=document_id
    )
    
    print(result['answer'])
    print(result['sources'])
    
    await rag.close()
```

### –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤

```python
results = await rag.search(
    query="–º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ",
    document_id=None,
    limit=5
)

for result in results:
    print(f"–î–æ–∫—É–º–µ–Ω—Ç: {result['filename']}")
    print(f"–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: {result['similarity']:.2f}")
    print(f"–¢–µ–∫—Å—Ç: {result['content'][:200]}...")
```

### –†–∞–±–æ—Ç–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏

```python
documents = await rag.get_documents()

for doc in documents:
    print(f"ID: {doc['id']}, –ò–º—è: {doc['filename']}")
    print(f"–§—Ä–∞–≥–º–µ–Ω—Ç–æ–≤: {doc['chunk_count']}")

await rag.delete_document(document_id)
```

### –°—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞

```python
# –ü–æ–ª—É—á–∏—Ç—å –∫—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
summary_result = await rag.summarize_document(document_id)

print(f"–î–æ–∫—É–º–µ–Ω—Ç: {summary_result['filename']}")
print(f"–§—Ä–∞–≥–º–µ–Ω—Ç–æ–≤: {summary_result['chunk_count']}")
print(f"\n–ö—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:\n{summary_result['summary']}")
```

## API Endpoints

### –î–æ–∫—É–º–µ–Ω—Ç—ã

- `GET /api/documents` - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `GET /api/documents/{id}` - –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–æ–∫—É–º–µ–Ω—Ç–µ
- `POST /api/upload` - –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
- `DELETE /api/documents/{id}` - –£–¥–∞–ª–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç

### –ß–∞—Ç –∏ –ø–æ–∏—Å–∫

- `POST /api/chat` - –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –∏ –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç
  ```json
  {
    "query": "–í–∞—à –≤–æ–ø—Ä–æ—Å",
    "document_id": 1,  // optional
    "context_limit": 3
  }
  ```

- `POST /api/search` - –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤
  ```json
  {
    "query": "–í–∞—à –∑–∞–ø—Ä–æ—Å",
    "document_id": 1,  // optional
    "context_limit": 5
  }
  ```

- `POST /api/summarize` - –ü–æ–ª—É—á–∏—Ç—å –∫—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
  ```json
  {
    "document_id": 1
  }
  ```
  –û—Ç–≤–µ—Ç:
  ```json
  {
    "summary": "–ö—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞...",
    "document_id": 1,
    "filename": "document.pdf",
    "chunk_count": 42
  }
  ```

### Health Check

- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### PostgreSQL
- `POSTGRES_USER` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ë–î
- `POSTGRES_PASSWORD` - –ø–∞—Ä–æ–ª—å –ë–î
- `POSTGRES_DB` - –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `POSTGRES_HOST` - —Ö–æ—Å—Ç –ë–î
- `POSTGRES_PORT` - –ø–æ—Ä—Ç –ë–î (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 6432)

#### LLM Provider
- `PROVIDER` - –ø—Ä–æ–≤–∞–π–¥–µ—Ä LLM (ollama / openai / deepseek / yandex / gigachat)
- `OLLAMA_HOST` - —Ö–æ—Å—Ç Ollama
- `OLLAMA_MODEL` - –º–æ–¥–µ–ª—å Ollama
- `OPENAI_API_KEY` - –∫–ª—é—á OpenAI API
- `DEEPSEEK_API_KEY` - –∫–ª—é—á DeepSeek API
- `YANDEX_GPT_API_KEY` - –∫–ª—é—á Yandex GPT API
- `GIGA_CHAT_AUTH_KEY` - –∫–ª—é—á GigaChat

#### Embeddings –∏ –ü–æ–∏—Å–∫
- `EMBEDDING_MODEL` - –º–æ–¥–µ–ª—å –¥–ª—è –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: sentence-transformers/paraphrase-multilingual-mpnet-base-v2)
- `CHUNK_SIZE` - —Ä–∞–∑–º–µ—Ä —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ —Ç–µ–∫—Å—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 500)
- `CHUNK_OVERLAP` - –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ –º–µ–∂–¥—É —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞–º–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 50)
- `SEARCH_LIMIT` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 7)
  - –£–≤–µ–ª–∏—á—å—Ç–µ –¥–ª—è –±–æ–ª–µ–µ –ø–æ–ª–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 10-15)
  - –£–º–µ–Ω—å—à–∏—Ç–µ –¥–ª—è –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 3-5)
- `MIN_SIMILARITY` - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ —Å—Ö–æ–∂–µ—Å—Ç–∏ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, 0.0-1.0 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 0.4)
  - –£–≤–µ–ª–∏—á—å—Ç–µ –¥–ª—è –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 0.5-0.6)
  - –£–º–µ–Ω—å—à–∏—Ç–µ –¥–ª—è –±–æ–ª–µ–µ –º—è–≥–∫–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 0.3)

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Ñ–∞–π–ª–æ–≤

- PDF (`.pdf`)
- Microsoft Word (`.docx`, `.doc`)
- Microsoft Excel (`.xlsx`, `.xls`)
- Markdown (`.md`, `.markdown`)
- HTML (`.html`, `.htm`)
- –¢–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã (`.txt`, `.csv`, `.json`, `.xml`, `.log`)

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –î–ª—è —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- Docker
- Docker Compose

### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- Python 3.11+
- PostgreSQL 16+ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º pgvector
- LLM provider (Ollama, OpenAI API –∏ –¥—Ä.)

## –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
pip install -r llm_manager/requirements.txt
```

### –ó–∞–ø—É—Å–∫ PostgreSQL —Å pgvector

```bash
docker run -d \
  --name rag_postgres \
  -e POSTGRES_USER=rag_user \
  -e POSTGRES_PASSWORD=rag_password \
  -e POSTGRES_DB=rag_db \
  -p 6432:5432 \
  pgvector/pgvector:pg16
```

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
psql -h localhost -U rag_user -d rag_db -f init.sql
```

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
uvicorn app.main:app --reload
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–µ–∫—Ç—ã

SDK –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫—É –≤ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö:

```python
import sys
sys.path.insert(0, 'path/to/RAG')

from RAG import RAGManager, VectorStore, DocumentProcessor

rag = RAGManager()
```

–ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–∞–∫ –ø–∞–∫–µ—Ç:

```bash
pip install -e path/to/RAG
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- [llm_manager](https://github.com/bazhil/llm_manager) - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ LLM
- [pgvector](https://github.com/pgvector/pgvector) - –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –≤ PostgreSQL
- [sentence-transformers](https://www.sbert.net/) - –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è embeddings
- [FastAPI](https://fastapi.tiangolo.com/) - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫

